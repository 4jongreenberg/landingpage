!function(e,t,o){function n(e){return"[object Function]"==m.call(e)}function r(e){return"string"==typeof e}function c(){}function s(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function i(){var e=h.shift();y=1,e?e.t?d(function(){("c"==e.t?f.injectCss:f.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),i()):y=0}function l(e,o,n,r,c,l,a){function p(t){if(!j&&s(u.readyState)&&(b.r=j=1,!y&&i(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&d(function(){F.removeChild(u)},50);for(var n in P[o])P[o].hasOwnProperty(n)&&P[o][n].onload()}}var a=a||f.errorTimeout,u=t.createElement(e),j=0,m=0,b={t:n,s:o,e:c,a:l,x:a};1===P[o]&&(m=1,P[o]=[]),"object"==e?u.data=o:(u.src=o,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){p.call(this,m)},h.splice(r,0,b),"img"!=e&&(m||2===P[o]?(F.insertBefore(u,v?null:g),d(p,a)):P[o].push(u))}function a(e,t,o,n,c){return y=0,t=t||"j",r(e)?l("c"==t?C:S,e,t,this.i++,o,n,c):(h.splice(this.i++,0,e),1==h.length&&i()),this}function p(){var e=f;return e.loader={load:a,i:0},e}var u,f,j=t.documentElement,d=e.setTimeout,g=t.getElementsByTagName("script")[0],m={}.toString,h=[],y=0,b="MozAppearance"in j.style,v=b&&!!t.createRange().compareNode,F=v?j:g.parentNode,j=e.opera&&"[object Opera]"==m.call(e.opera),j=!!t.attachEvent&&!j,S=b?"object":j?"script":"img",C=j?"script":S,w=Array.isArray||function(e){return"[object Array]"==m.call(e)},E=[],P={},A={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};f=function(e){function t(e){var t,o,n,e=e.split("!"),r=E.length,c=e.pop(),s=e.length,c={url:c,origUrl:c,prefixes:e};for(o=0;s>o;o++)n=e[o].split("="),(t=A[n.shift()])&&(c=t(c,n));for(o=0;r>o;o++)c=E[o](c);return c}function s(e,r,c,s,i){var l=t(e),a=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=n(r)?r:r[e]||r[s]||r[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,r,c,s,i):(P[l.url]?l.noexec=!0:P[l.url]=1,c.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":o,l.noexec,l.attrs,l.timeout),(n(r)||n(a))&&c.load(function(){p(),r&&r(l.origUrl,i,s),a&&a(l.origUrl,i,s),P[l.url]=2})))}function i(e,t){function o(e,o){if(e){if(r(e))o||(u=function(){var e=[].slice.call(arguments);f.apply(this,e),j()}),s(e,u,t,0,a);else if(Object(e)===e)for(l in i=function(){var t,o=0;for(t in e)e.hasOwnProperty(t)&&o++;return o}(),e)e.hasOwnProperty(l)&&(!o&&!--i&&(n(u)?u=function(){var e=[].slice.call(arguments);f.apply(this,e),j()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),j()}}(f[l])),s(e[l],u,t,l,a))}else!o&&j()}var i,l,a=!!e.test,p=e.load||e.both,u=e.callback||c,f=u,j=e.complete||c;o(a?e.yep:e.nope,!!p),p&&o(p)}var l,a,u=this.yepnope.loader;if(r(e))s(e,0,u,0);else if(w(e))for(l=0;l<e.length;l++)a=e[l],r(a)?s(a,0,u,0):w(a)?f(a):Object(a)===a&&i(a,u);else Object(e)===e&&i(e,u)},f.addPrefix=function(e,t){A[e]=t},f.addFilter=function(e){E.push(e)},f.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=p(),e.yepnope.executeStack=i,e.yepnope.injectJs=function(e,o,n,r,l,a){var p,u,j=t.createElement("script"),r=r||f.errorTimeout;j.src=e;for(u in n)j.setAttribute(u,n[u]);o=a?i:o||c,j.onreadystatechange=j.onload=function(){!p&&s(j.readyState)&&(p=1,o(),j.onload=j.onreadystatechange=null)},d(function(){p||(p=1,o(1))},r),l?j.onload():g.parentNode.insertBefore(j,g)},e.yepnope.injectCss=function(e,o,n,r,s,l){var a,r=t.createElement("link"),o=l?i:o||c;r.href=e,r.rel="stylesheet",r.type="text/css";for(a in n)r.setAttribute(a,n[a]);s||(g.parentNode.insertBefore(r,g),d(o,0))}}(this,document),function(){"use strict";var e=!1,t=document.getElementById("webplate").getAttribute("src").replace("start.js",""),o=document.getElementById("webplate-content"),n={engine:{css:t+"engine/css/",js:t+"engine/js/"},project:{component:t+"project/component/",config:t+"project/config.json",css:t+"project/css/",iconFont:{fontAwesome:t+"project/font-awesome/css/font-awesome.min.css",icoMoon:t+"project/icomoon/style.css"},js:t+"project/js/"},root:t},r={engine:{files:[n.engine.css+"styles.min.css",n.engine.js+"scripts.min.js"],filesLight:[n.engine.css+"styles-light.min.css",n.engine.js+"scripts-light.min.js"]},project:{componentsFirst:[],components:[],css:[],js:[],iconFont:!1}},c={log:function(t){return window&&window.console&&e?void(e.engine&&"boolean"==typeof e.engine.log&&e.engine.log&&console.log(t)):!1},getEngineFiles:function(){return e.engine&&"boolean"==typeof e.engine.light&&e.engine.light?r.engine.filesLight:r.engine.files},getJSON:function(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){return 4===this.readyState?0===this.status||this.status>=200&&this.status<300?t(!1,JSON.parse(this.responseText)):t(!0):void 0},o.open("GET",e),o.send()},loadEngine:function(e){yepnope({load:c.getEngineFiles(),complete:function(){return c.log("Webplate: Engine files load...successful"),e()}})},loadProject:function(e){c.loadProjectComponentsFirst(function(t){t&&c.log("Webplate: Components first load...successful"),c.loadProjectComponents(function(t){t&&c.log("Webplate: Components load...successful"),c.loadProjectCSSJS(function(){return e()})})})},loadProjectComponent:function(e,t){c.getJSON(n.project.component+e+"/.bower.json",function(o,r){if(o)return t(!1);var c=[];if("object"==typeof r.main)for(var s=0,i=r.main.length;i>s;s++)c.push(n.project.component+e+"/"+r.main[s]);else c.push(n.project.component+e+"/"+r.main);return c.length<1?t(!1):void yepnope({load:c,complete:function(){t(!0)}})})},loadProjectComponents:function(e){var t=r.project.components.length;if(1>t)return e(!1);for(var o=0,n=r.project.components.length;n>o;o++)c.loadProjectComponent(r.project.components[o],function(){return t--,0===t?e(!0):void 0})},loadProjectComponentsFirst:function(e){var t=r.project.componentsFirst.length;if(1>t)return e(!1);for(var o=0,n=r.project.componentsFirst.length;n>o;o++)c.loadProjectComponent(r.project.componentsFirst[o],function(){return t--,0===t?e(!0):void 0})},loadProjectCSSJS:function(e){var t=r.project.css.length,o=r.project.js.length;return 1>t&&1>o?e(!1):(t>0&&yepnope({load:r.project.css,complete:function(){return t=0,c.log("Webplate: Project CSS load...successful"),0===o?e(!0):void 0}}),void(o>0&&yepnope({load:r.project.js,complete:function(){return o=0,c.log("Webplate: Project JS load...successful"),0===t?e(!0):void 0}})))},setProjectFileLoads:function(){if(!e.project)return!1;var t=!1,o="",c=Web.url();if(r.project.componentsFirst=Web.helper.setDefault(e.project.componentsFirst,[]),r.project.components=Web.helper.setDefault(e.project.components,[]),r.project.css=Web.helper.setDefault(e.project.css,[]),r.project.js=Web.helper.setDefault(e.project.js,[]),r.project.iconFont=Web.helper.setDefault(e.project.iconFont),e.project.page)for(var s=0,i=e.project.page.length;i>s;s++){var l=e.project.page[s];if(l.url.indexOf("*")>-1?c.currentUrl.indexOf(l.url.substring(0,l.url.length-1))>-1&&(t=!0):c.currentUrl===c.baseUrl+l.url&&(t=!0),t){r.project.iconFont=Web.helper.setDefault(l.iconFont,r.project.iconFont),l.overwrite===!0?(r.project.componentsFirst=Web.helper.setDefault(l.componentsFirst,[]),r.project.components=Web.helper.setDefault(l.components,[]),r.project.css=Web.helper.setDefault(l.css,[]),r.project.js=Web.helper.setDefault(l.js,[])):(Array.isArray(l.componentsFirst)&&(r.project.componentsFirst=r.project.componentsFirst.concat(l.componentsFirst)),Array.isArray(l.components)&&(r.project.components=r.project.components.concat(l.components)),Array.isArray(l.css)&&(r.project.css=r.project.css.concat(l.css)),Array.isArray(l.js)&&(r.project.js=r.project.js.concat(l.js)));break}}if(e.cache&&e.cache.bust&&(o="?ts="+e.cache.bust),r.project.css.length>0)for(var s=0,i=r.project.css.length;i>s;s++)r.project.css[s]=n.project.css+r.project.css[s]+o;if(r.project.js.length>0)for(var s=0,i=r.project.js.length;i>s;s++)r.project.js[s]=n.project.js+r.project.js[s]+o;return!0},init:function(){c.getJSON(n.project.config,function(t,n){return t?(c.log("Webplate: Not initialised because the project config file was not found."),!1):(e=n,void c.loadEngine(function(){c.setProjectFileLoads(),c.loadProject(function(){null!==o?(o.removeAttribute("style"),document.getElementById("web-page-loader").parentNode.removeChild(document.getElementById("web-page-loader"))):Web.dom.body.removeAttribute("style")})}))})}};c.init()}();